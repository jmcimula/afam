<!doctype html><!--[if lt IE 7]> <html class="ie6" lang="ja" prefix="og: http://ogp.me/ns#"> <![endif]--><!--[if IE 7]> <html class="i7" lang="ja" prefix="og: http://ogp.me/ns#"> <![endif]--><!--[if IE 8]> <html class="ie" lang="ja" prefix="og: http://ogp.me/ns#"> <![endif]--> <!--[if gt IE 8]><!--><!--<![endif]--><html lang="en-US" prefix="og: http://ogp.me/ns#"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta property="og:title" content="Best Practices For Supporting Internationalization and Localization On Android"><meta property="og:description" content="At addhen, localization is something we take very seriously when developing an Android application. Though most of our apps aren&rsquo;t translated into most languages, we make sure we build apps that are localizable. That way in the future when we&rsquo;re ready to open the app to more regions and languages, we already have a strong foundation. I&rsquo;m going to share some of our best practices for localization support. If you&rsquo;re not familiar with what internationalization and localization are, I&rsquo;ll go ahead to define them."><meta property="og:type" content="website"><meta property="og:url" content="https://addhen.github.io/afam/news/internationalization-and-localization-on-android/"><meta property="og:updated_time" content="2016-06-01 11:08:17 &#43;0900 JST"><meta itemprop="name" content="Best Practices For Supporting Internationalization and Localization On Android"><meta itemprop="description" content="At addhen, localization is something we take very seriously when developing an Android application. Though most of our apps aren&rsquo;t translated into most languages, we make sure we build apps that are localizable. That way in the future when we&rsquo;re ready to open the app to more regions and languages, we already have a strong foundation. I&rsquo;m going to share some of our best practices for localization support. If you&rsquo;re not familiar with what internationalization and localization are, I&rsquo;ll go ahead to define them."><meta itemprop="keywords" content="accessibility,database,debugging,leakcanary,localization,memory-leaks,profiling,sharing,storing,translation,"><meta itemprop="wordCount" content="936"><meta name="news_keywords" content="localization,translation,android,locale,accessibility"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Best Practices For Supporting Internationalization and Localization On Android"><meta name="twitter:description" content="At addhen, localization is something we take very seriously when developing an Android application. Though most of our apps aren&rsquo;t translated into most languages, we make sure we build apps that are localizable. That way in the future when we&rsquo;re ready to open the app to more regions and languages, we already have a strong foundation. I&rsquo;m going to share some of our best practices for localization support. If you&rsquo;re not familiar with what internationalization and localization are, I&rsquo;ll go ahead to define them."><meta name="twitter:site" content="@afam"><meta name="twitter:domain" content="www.afam.com"><title>AFAM &mdash; Best Practices For Supporting Internationalization and Localization On Android</title><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.0/css/font-awesome.min.css" rel="stylesheet" type="text/css" media="all"><link rel="stylesheet" href="https://addhen.github.io/afam/css/bootstrap.min.css" media="screen"><link href="https://fonts.googleapis.com/css?family=Lato|Open+Sans|Roboto+Condensed|Roboto+Mono|Roboto+Slab|Orbitron:400,500,700,900" rel="stylesheet"><link href="https://addhen.github.io/afam/css/mdb.min.css" rel="stylesheet" media="all" type="text/css"><link href="https://addhen.github.io/afam/css/styles-8609750943.min.css" rel="stylesheet" media="all" type="text/css"><link href="" rel="alternate" type="application/rss+xml" title="AFAM"></head><body><header><nav class="navbar navbar-dark navbar-fixed-top scrolling-navbar danger-color-dark"><button class="navbar-toggler hidden-sm-up" type="button" data-toggle="collapse" data-target="#collapseEx"><i class="fa fa-bars"></i></button><div class="container"><div class="collapse navbar-toggleable-xs" id="collapseEx"><div id="logo"><a class="waves-effect waves-light navbar-brand" href="https://addhen.github.io/afam/">AFAM</a></div><ul class="nav navbar-nav smooth-scroll"><li class="nav-item"><a class="nav-link" href="https://addhen.github.io/afam/">Home</a></li><li class="nav-item"><a class="nav-link" href="https://addhen.github.io/afam/calendar">Calendar</a></li><li class="nav-item"><a class="nav-link" href="https://addhen.github.io/afam/join/">Join</a></li><li class="nav-item page-scroll"><a class="nav-link page-scroll" href="https://addhen.github.io/afam/#contact">Contact Us</a></li></ul><ul class="nav navbar-nav nav-flex-icons"><li class="nav-item"><a class="nav-link"><i class="fa fa-facebook"></i></a></li><li class="nav-item"><a class="nav-link"><i class="fa fa-twitter"></i></a></li><li class="nav-item"><a class="nav-link"><i class="fa fa-instagram"></i></a></li></ul></div></div></nav></header><div class="container"><div class="row"><div class="wrap-content col-md-10 offset-md-1"><h2>Best Practices For Supporting Internationalization and Localization On Android</h2><ul class="list-inline"><li class="list-inline-item"><span class="post-meta"><i class="fa fa-calendar"></i> <time datetime="2016-06-01T11:08:17&#43;09:00" itemprop="datePublished">June 1, 2016</time></span></li><li class="list-inline-item"><span class="post-meta"><i class="fa fa-user"></i> Henry Addo</span></li></ul><div class="row"><div class="p-l-1"><p>At addhen, localization is something we take very seriously when developing an Android application. Though most of our apps aren&rsquo;t translated into most languages, we make sure we build apps that are localizable. That way in the future when we&rsquo;re ready to open the app to more regions and languages, we already have a strong foundation. I&rsquo;m going to share some of our best practices for localization support. If you&rsquo;re not familiar with what <em>internationalization</em> and <em>localization</em> are, I&rsquo;ll go ahead to define them.</p><p><strong>Internationalization</strong> is the process of designing an application to make it possible for it to be localized to a particular region and language.</p><p><strong>Localization</strong> is the act of making a product suited for a particular region and language that conforms to the region&rsquo;s <em>locale</em>.</p><p><strong>Locale</strong> is a set of parameters that defines the user&rsquo;s language and region.</p><ol><li><p><strong>Never hardcode user facing strings</strong></p><p>At all cost we avoid hardcoding all static strings the user would have to see. We make sure we have them in their respective string resource file. For example,</p><p><code>mLableTextView.setText(&quot;Quantity&quot;);</code> This makes it hard to replace in the future when we want to translate <code>Quantity</code> into more languages. Instead we put that in a string resource and reference the name when setting the TextView&rsquo;s text. In <code>res/values/string.xml</code> we&rsquo;ll have</p><p><code>&lt;string name=&quot;quantity&quot;&gt;Quantity&lt;/string&gt;</code></p><p>Then reference it in code as <code>mLableTextView.setText(R.string.quantity);</code> using the string name. This way, when we want to translate <code>Quantity</code> into French we&rsquo;ll have to put it in <code>res/values-fr/string.xml</code> where <code>-fr</code> is the resource qualifer for the French language.</p></li><li><p><strong>Load fonts as localized string</strong></p><p>When we make use of custom fonts, we don&rsquo;t hardcode that either in the view. This makes it possible for us to easily support fonts for a particular language. In the same way as we define string, we put the font name in a string resource file.</p><p><code>&lt;string name=&quot;custom_font_name&quot;&gt;fonts/custom_font.ttf&lt;/string&gt;</code></p><p>Then declare a styleable attribute that can be referenced in the View&rsquo;s implementation. This also makes it possible to set the font in a layout resource file.</p><pre class="prettyprint linenums"><code class="language-xml">
    &lt;!-- Inside res/values/attrs.xml --&gt;
    &lt;declare-styleable name=&#34;CustomView&#34;&gt;
        &lt;attr name=&#34;fontName&#34; format=&#34;String&#34;/&gt;
    &lt;/declare-styleable&gt;
    </code></pre><p>In our custom view implementation, we load and cache the font in memory. See sample code below.</p><pre class="prettyprint linenums"><code class="language-java">
    public CustomView(Context context, AttributeSet attributeSet) {
        super(context, attributeSet);
        initCustomFont(context, attributeSet);
    }

    private void initCustomFont(Context context, AttributeSet attributeSet) {
        final TypedArray attrs = context.obtainStyledAttributes(attributeSet, R.styleable.CustomView);
        final String fontName = attrs.getString(R.string.CustomView_fontName);
        final TypefaceManager typefaceManager = new TypefaceManager();
        final Typeface typeface = typefaceManager.getTypeface(context,fontName);
        if (typeface != null) {
            super.setTypeface(typeface);
        }
    }
    
    // Manages loading and caching of the font
    private static class TypefaceManager {

        private final LruCache&lt;String, Typeface&gt; mCache;

        public TypefaceManager() {
            mCache = new LruCache&lt;&gt;(3);
        }

        public Typeface getTypeface(final Contenxt context, final String filename) {
            Typeface typeface = mCache.get(filename);
            if (typeface == null) {
                typeface = Typeface.createFromAsset(context.getAssets(), filename);
                mCache.put(filename, typeface);
            }
            return typeface;
        }
    }
    </code></pre><p>In our xml <code>res/layout/label_item.xml</code> we then set the font as shown below.</p><pre class="prettyprint linenums"><code class="language-xml">
    &lt;com.package.name.widget.CustomView
        ...
        app:fontName=&#34;@string/custom_font_name&#34;/&gt;
    </code></pre></li><li><p><strong>Right-To-Left (RTL) support enabled</strong></p><p>We enable <code>RTL</code> since it doesn&rsquo;t really require much work. It makes our layouts ready for switching to an <code>RTL</code> language. In the application manifest, we enable layout mirroring by setting <code>android:supportsRtl</code> to <code>true</code>.<pre class="prettyprint linenums"><code class="language-xml">
    &lt;application
        ...
        android:supportsRtl=&#34;true&#34;/&gt;
    </code></pre></p><p>If we&rsquo;re targing <code>API 17</code> and above, we replace all <code>left/right</code> layout properties to the new <code>start/end</code> equivalents. So <code>paddingLeft</code> becomes <code>paddingStart</code> and <code>paddingRight</code> becomes <code>paddingEnd</code>. Same for margin directional properties. It requires a bit of work when targeting below <code>API 17</code>. Instead of supporting different layouts which makes maintenance a headache, we put these properties in a style resource for the different API versions. See sample code below.<pre class="prettyprint linenums"><code class="language-xml">
    &lt;!-- res/values-v17/styles.xml targets API level 17&#43; --&gt;
    &lt;style name=&#34;TextView.Label&#34;&gt;
        ...
        &lt;item name=&#34;android:layout_marginStart&#34;&gt;16dp&lt;/item&gt;
        &lt;item name=&#34;android:layout_marginEnd&#34;&gt;16dp&lt;/item&gt;
        ...
    &lt;/style&gt;

    &lt;!-- res/values/styles.xml targets API 17- --&gt;
    &lt;style name=&#34;TextView.Label&#34;&gt;
        ...
        &lt;item name=&#34;android:layout_marginLeft&#34;&gt;16dp&lt;/item&gt;
        &lt;item name=&#34;android:layout_marginRight&#34;&gt;16dp&lt;/item&gt;
        ...
    &lt;/style&gt;

    &lt;!-- res/layout/screen_layout.xml --&gt;
    &lt;com.package.name.widget.CustomView
        style=&#34;@style/TextView.Label&#34;
        android:layout_width=&#34;wrap_content&#34;
        android:layout_height=&#34;wrap_content&#34;
        app:fontName=&#34;@string/custom_font_name&#34;/&gt;
    </code></pre></p></li><li><p><strong>Localize line heights dimensions</strong></p><p>At all cost we don&rsquo;t hardcode value for the <code>android:lineSpacingMultiplier</code> property. This way, it&rsquo;s easier to localize line heights value. Some langagues will need bigger line spacing than others.</p><pre class="prettyprint linenums"><code class="language-xml">
    &lt;!-- res/values/integers.xml --&gt;
    &lt;resources&gt;
        &lt;item name=&#34;line_height&#34; format=&#34;float&#34; type=&#34;integer&#34;&gt;0.5&lt;/item&gt;
    &lt;/resources&gt;

    &lt;!-- res/values-fr/integers.xml --&gt;
    &lt;style name=&#34;TextView.Label&#34;&gt;
        &lt;item name=&#34;line_height&#34; format=&#34;float&#34; type=&#34;integer&#34;&gt;1.0&lt;/item&gt;
    &lt;/style&gt;

    &lt;!-- res/layout/screen_layout.xml --&gt;
    &lt;com.package.name.widget.CustomView
        style=&#34;@style/TextView.Label&#34;
        android:layout_width=&#34;wrap_content&#34;
        android:layout_height=&#34;wrap_content&#34;
        android:lineSpacingMultiplier=&#34;@integer/line_height&#34;
        app:fontName=&#34;@string/custom_font_name&#34;/&gt;
    </code></pre></li><li><p><strong>Test using pseudolocalization</strong></p><p>Since most of our apps aren&rsquo;t translated into different languages, we take advantage of pseudo-localization provided by Android. Pseudo-localization in general is a method of testing the internationalization of text while maintaining its readability. We do this more to expose issues regarding length and flow of text and layout issues. In our debug builds, we enable pseudolocalization by setting <code>pseudoLocalesEnabled</code> to <code>true</code></p><pre class="prettyprint linenums"><code class="language-java">
    // In build.gradle file
    buildTypes {
        debug {
            pseudoLocalesEnabled true
        }
    }
    </code></pre><p>Then configure a device to make use of the <code>en_XA</code> locale. This gives us texts which are longer and with accents. And to test the layout mirroring (RTL), we configure the device to another locale <code>ar_XB</code>. This shifts everything from <code>Left-Right</code> to <code>Right-Left</code>.</p><p>On a compatible Android device go to settings and select <strong>Language &amp; Input</strong> &gt; <strong>Language</strong> &gt; <strong>English (XA)</strong> to enable the <code>en_XA</code> locale.</p><p>Go to settings and select <strong>Language &amp; Input</strong> &gt; <strong>Language</strong> &gt; <strong>(XB) العربية</strong> to enable the <code>ar_XB</code> locale.</p></li></ol><p>As good practice, we make sure before we make a final release to the Playstore, we&rsquo;ve tested our apps in at least 3 or more different languages to visually inspect how the app will behave in these langagues. Though this gives us extra workload it makes us confident that, our app doesn&rsquo;t only function well but it&rsquo;s appears good in other languages.</p><p>The android documentation has a <a href="https://developer.android.com/distribute/tools/localization-checklist.html">checklist</a> for localization that you can go through to make your app localizable which I recommend reading.</p></div></div><div class="row"><div class="p-l-1"><ul class="list-inline"><li class="list-inline-item"><span class="pink-text"><i class="fa fa-clock-o"></i> <time datetime="2016-06-01T11:08:17&#43;09:00" itemprop="datePublished">June 1, 2016</time></span></li><li class="list-inline-item"><a class="btn btn-primary tweet-this" href="https://twitter.com/share" title="Tweet this"><i class="fa fa-twitter"></i> Tweet</a></li></ul></div></div><div class="row"><div class="col-sm-2"><a class="btn btn-danger waves-effect waves-light" href="https://addhen.github.io/afam/news/persisting-with-cupboard/"><i class="fa fa-fw fa-long-arrow-left"></i></a></div><div class="col-sm-2 offset-md-8"><a class="btn btn-danger waves-effect waves-light pull-right" href="https://addhen.github.io/afam/news/storing-objects-with-shared-preferences/"><i class="fa fa-fw fa-long-arrow-right"></i></a></div></div><div class="row"><div class="p-l-1"><div id="disqus_thread"></div><script async type="text/javascript">var disqus_shortname = 'afam';
    
     
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();</script><noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript></div></div></div></div></div><footer class="page-footer rgba-black-lighter center-on-small-only"><div class="footer-copyright text-xs-center rgba-black-lighter"><div class="container"><ul class="list-inline"><li class="list-inline-item">&copy; 2016 &middot; AFAM <span class="powered-by">&middot; developed by <a href="http://www.addhen.com" rel="nofollow">addhen</a></span></li></ul></div></div></footer><script type="text/javascript" src="https://addhen.github.io/afam/js/jquery-2.2.3.min.js" defer="defer"></script><script type="text/javascript" src="https://addhen.github.io/afam/js/tether.min.js" defer="defer"></script><script type="text/javascript" src="https://addhen.github.io/afam/js/bootstrap.min.js" async defer="defer"></script><script type="text/javascript" src="https://addhen.github.io/afam/js/jquery.easing-1.3.min.js" async defer="defer"></script><script type="text/javascript" src="https://addhen.github.io/afam/js/mdb.min.js" async defer="defer"></script><script type="text/javascript" src="https://addhen.github.io/afam/js/jqBootstrapValidation-1.3.7.min.js" defer="defer"></script><script type="text/javascript" src="https://www.google.com/recaptcha/api.js" async defer="defer"></script><script type="text/javascript" src="https://addhen.github.io/afam/js/site-8b7d768f98.min.js" async defer="defer"></script><script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js?autoload=true&skin=sons-of-obsidian" async defer="defer"></script><script async>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-XXXXXXXX-X', 'auto');
  ga('send', 'pageview');</script></body></html>